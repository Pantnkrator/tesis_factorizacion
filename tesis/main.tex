\documentclass[12pt,letterpaper, oneside]{book}
\usepackage[ruled,vlined]{algorithm2e}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{changepage}
\usepackage{tgtermes} % times font
\usepackage[spanish,es-tabla, es-lcroman]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{wasysym}
\usepackage{lscape}
\usepackage[colorlinks=true, linkcolor=black,
citecolor=black, urlcolor=black,hidelinks]{hyperref}
\usepackage{float}
\usepackage{booktabs}
\usepackage{setspace} %por si el titulo es mas largo y el interlineado
\usepackage{xcolor} %para darle color a las lineas del titulo.
\usepackage{lipsum} %crea texto ficticio del texto Lorem Ipsum
\usepackage[left=4cm,top=4cm,right=2.6cm,,bottom=2.6cm]{geometry}
\usepackage[justification=centering]{caption}
\usepackage{svg}
\usepackage{hyperref}
\usepackage{adjustbox}

\captionsetup{belowskip=0pt}
% \onehalfspacing

\newcommand{\grad}{$^{\circ}$}
\renewcommand{\baselinestretch}{1.5} %interlineado 1.5

\usepackage{csquotes}
\usepackage[backend=biber,natbib,url=false,doi=false,style=apa,maxcitenames=5]{biblatex}

% Cuando el idioma es otro "et al." cambia, con este comando se fuerza a si o si usar "et al."
\DefineBibliographyStrings{spanish}{%
  andothers = {et\addabbrvspace al\adddot}
}
\addbibresource{chapters/biblio.bib}

\renewcommand{\labelenumii}{\arabic{enumi}.\arabic{enumii}}
\renewcommand{\labelenumiii}{\arabic{enumi}.\arabic{enumii}.\arabic{enumiii}}
\renewcommand{\labelenumiv}{\arabic{enumi}.\arabic{enumii}.\arabic{enumiii}.\arabic{enumiv}}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\lstset{style=mystyle}


% SE ELIMINA LA PALABRA "CAPÍTULO" DEL TÍTULO
\usepackage{titlesec}

% Capítulos sin la palabra "Capítulo "
\titleformat{\chapter}
  {\normalfont\normalsize\bfseries}{CAPÍTULO \thechapter}{0.5em}{}
%   \titlespacing*{\chapter}{0pt}{2pt}{2pt}
\titlespacing*{\chapter}{0pt}{0pt}{0pt}[0pt]
% \titlespacing*{\chapter}{0pt}{3.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}

% Cambiamos el tamaño de las secciones
\titleformat{\section}
  {\normalfont\normalsize\bfseries}{\thesection.}{0.5em}{}
\titleformat{\subsection}
  {\normalfont\normalsize\bfseries}{\thesubsection.}{0.5em}{}

% SE ELIMINA LA CABECERA DE LAS HOJAS Y LA NUMERACIÓN ES ABAJO
\usepackage{fancyhdr}
\fancyhf{}
\renewcommand\headrulewidth{0pt}
% \fancyfoot[RO, LE]{\thepage}
% \fancyfoot[C]{\thepage}
% SE ENUMERA A LA DERECHA
\fancyfoot[C]{\thepage}
% SE REDEFINE EL ESTILO PARA ENUMERAR LAS PÁGINAS DE CAPÍTULO A LA DERECHA
\pagestyle{fancy}
\fancypagestyle{plain}{%
    \renewcommand{\headrulewidth}{0pt}%
    \fancyhf{}%
    \fancyfoot[C]{\thepage}%
}

% \renewcommand{\contentsname}{Índice}

\usepackage[subfigure]{tocloft}
% \setlength{\cftpartindent}{0em}
% \setlength{\cftchapindent}{0em}
\setlength{\cftsecindent}{0em}
\setlength{\cftsubsecindent}{0em}
\setlength{\cftsubsubsecindent}{0em}
% \setlength{\cftsubsubsecindent}{3em}

\usepackage{enumitem}
\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}

\renewcommand*{\listalgorithmcfname}{ÍNDICE DE ALGORITMOS}
\renewcommand*{\algorithmcfname}{Algoritmo}
\renewcommand*{\algorithmautorefname}{algoritmo}
\SetKwInput{KwData}{Requiere}

\makeatletter
\patchcmd{\chapter}{\if@openright\cleardoublepage\else\clearpage\fi}{}{}{}
\makeatother

% Contar las figuras sin el capítulo
\usepackage{chngcntr}
\counterwithout{figure}{chapter}

\addto\captionsspanish{% Replace "spanish" with the language you use
  \renewcommand{\listalgorithmcfname}%
    {\fontsize{16}{20}\selectfont ÍNDICE DE ALGORITMOS}
}

% Editando el titulo del indice
\addto\captionsspanish{% Replace "spanish" with the language you use
  \renewcommand{\contentsname}%
    {\fontsize{16}{20}\selectfont ÍNDICE}
}
\addto\captionsspanish{% Replace "spanish" with the language you use
  \renewcommand{\listfigurename}%
    {\fontsize{16}{20}\selectfont ÍNDICE DE FIGURAS}
}

\addto\captionsspanish{% Replace "spanish" with the language you use
  \renewcommand{\listtablename}%
    {\fontsize{16}{20}\selectfont ÍNDICE DE TABLAS}
}
% quitando espacio del titulo del indice
\setlength{\cftbeforetoctitleskip}{-1em}
\setlength{\cftaftertoctitleskip}{1em}

% Quitando el identado en cada parrafo
\setlength\parindent{0pt}

% Espaciado entre parrafos
\setlength{\parskip}{0.5em}
\unaccentedoperators

\begin{document}
	%FRONTMATTER
	%---------------------------------------------------
	\frontmatter %numeros romanos
	\include{caratula}
% 	\include{jurado}
  \include{dedicatoria}
  \include{agradecimientos}
  \include{resumen}
  % \singlespacing
	
	%ÍNDICE O TABLA DE CONTENIDO-------------------
	\tableofcontents
  \clearpage
  \listoffigures
  \clearpage
  \listoftables
  \clearpage
  \listofalgorithms
  \clearpage
	\setcounter{page}{1}
	%\cleardoublepage
% 	\addcontentsline{toc}{chapter}{Lista de figuras} % para 						que aparezca en el indice de contenidos
% 	\listoffigures % indice de figuras
	%\cleardoublepage
% 	\addcontentsline{toc}{chapter}{Lista de tablas} % para que 						aparezca en el indice de contenidos
% 	\listoftables % indice de tablas
	
	 % si no queremos que añada la palabra "Capitulo"
% 	\addcontentsline{toc}{chapter}{INTRODUCCIÓN} % si queremos que aparezca en el índice
	%\markboth{AGRADECIMIENTOS}{AGRADECIMIENTOS} % encabezado
	
	%MAINMATTER
	%--------------------------------------------------	
	\mainmatter %numeros arabicos.
    
    % \begingroup
    % \renewcommand{\cleardoublepage}{}
    % \renewcommand{\clearpage}{}
    
    \raggedbottom
    
    % \thispagestyle{empty}
    \input{chapters/marco_referencial}
    \input{chapters/marco_teorico}
    \input{chapters/marco_aplicativo.tex}
    \input{chapters/evaluacion_resultados.tex}
    \input{chapters/concluciones.tex}
    \input{chapters/bibliografia.tex}
    \counterwithin{figure}{chapter}
    % \endgroup
    % \bibliographystyle{apacite}
    % \bibliography{capitulos/biblio.bib}
	%--------------------------------------------------
	
	
	
	%BACKMATTER
	%---------------------------------------------------
% 	\backmatter
% 	%BIBLIOGRAFÍA.
% 	%\cleardoublepage
% 	\addcontentsline{toc}{chapter}{Bibliografía}
% 	\bibliographystyle{apalike}
% 		\bibliography{capitulos/biblio}
		
%---------------------------------------------------	
	
\end{document}
